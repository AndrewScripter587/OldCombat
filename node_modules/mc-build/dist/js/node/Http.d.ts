import {SocketConnectOptionsTcp} from "./net/Socket"
import {Agent} from "http"

export type HttpCreateServerOptions = {
	/**
	Specifies the `IncomingMessage` class to be used. Useful for extending the original `IncomingMessage`.
	
	Default: `js.node.http.IncomingMessage`.
	*/
	IncomingMessage?: null | any, 
	/**
	Specifies the `ServerResponse` class to be used. Useful for extending the original `ServerResponse`.
	
	Default: `ServerResponse`.
	*/
	ServerResponse?: null | any
}

/**
Type of the options object passed to `Http.request`.
*/
export type HttpRequestOptions = {
	/**
	Controls Agent behavior.
	
	Possible values:
	
	- `undefined` (default): use http.globalAgent for this host and port.
	- `Agent` object: explicitly use the passed in `Agent`.
	- `false` : causes a new `Agent` with default values to be used.
	*/
	agent?: null | Agent | boolean, 
	/**
	Basic authentication i.e. `'user:password'` to compute an Authorization header.
	*/
	auth?: null | string, 
	/**
	A function that produces a socket/stream to use for the request when the `agent` option is not used.
	This can be used to avoid creating a custom `Agent` class just to override the default `createConnection` function.
	See [agent.createConnection()](https://nodejs.org/api/http.html#http_agent_createconnection_options_callback) for more details.
	Any `Duplex` stream is a valid return value.
	*/
	createConnection?: null | ((options: SocketConnectOptionsTcp, callabck?: ((err: Error, stream: IDuplex) => void)) => IDuplex), 
	/**
	Default port for the protocol.
	
	Default: `agent.defaultPort` if an Agent is used, else `undefined`.
	*/
	defaultPort?: null | number, 
	/**
	IP address family to use when resolving `host` or `hostname`.
	Valid values are `4` or `6`. When unspecified, both IP v4 and v6 will be used.
	*/
	family?: null | number, 
	/**
	An object containing request headers.
	*/
	headers?: null | {[key: string]: string | string[]}, 
	/**
	A domain name or IP address of the server to issue the request to.
	
	Default: `'localhost'`.
	*/
	host?: null | string, 
	/**
	Alias for `host`.
	To support `url.parse()`, hostname will be used if both `host` and `hostname` are specified.
	*/
	hostname?: null | string, 
	/**
	Local interface to bind for network connections.
	*/
	localAddress?: null | string, 
	/**
	A string specifying the HTTP request method.
	
	Default: `'GET'`.
	*/
	method?: null | string, 
	/**
	Request path. Should include query string if any. E.G. `'/index.html?page=12'`.
	An exception is thrown when the request path contains illegal characters.
	Currently, only spaces are rejected but that may change in the future.
	
	Default: `'/'`.
	*/
	path?: null | string, 
	/**
	Port of remote server.
	
	Default: `defaultPort` if set, else `80`.
	*/
	port?: null | number, 
	/**
	Protocol to use.
	
	Default: `'http:'`.
	*/
	protocol?: null | string, 
	/**
	Specifies whether or not to automatically add the Host header.
	Defaults to `true`.
	*/
	setHost?: null | boolean, 
	/**
	Unix Domain Socket (cannot be used if one of host or port is specified, those specify a TCP Socket).
	*/
	socketPath?: null | string, 
	/**
	A number specifying the socket timeout in milliseconds.
	This will set the timeout before the socket is connected.
	*/
	timeout?: null | number
}
