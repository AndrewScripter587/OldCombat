import {Bytes} from "./haxe/io/Bytes"
import {Map as Map__1} from "./Map"

export declare interface Io {
	write(path: string, content: string): void
	reportFilesRemoved(oldFiles: Map__1<string, string>): string[]
	reportFilesAdded(oldFiles: Map__1<string, string>): string[]
	reportFilesChanged(oldFiles: Map__1<string, string>): string[]
	reportFileMetadata(): Map__1<string, string>
}

export declare class RevertTracker {
	constructor()
	protected filesTracked: Map__1<string, Bytes>
	track(path: string): void
	revert(): void
}

export declare class SyncIo implements Io {
	constructor()
	protected fileData: Map__1<string, string>
	revertMap: RevertTracker
	reportFilesRemoved(oldFiles: Map__1<string, string>): string[]
	reportFilesAdded(oldFiles: Map__1<string, string>): string[]
	reportFilesChanged(oldFiles: Map__1<string, string>): string[]
	reportFileMetadata(): Map__1<string, string>
	protected existingDirectories: Map__1<string, boolean>
	write(path: string, content: string): void
	cleanup(): void
	finished(): boolean
}

export type IoEntry = {
	c: string, 
	p: string
}

export declare class ThreadedIo implements Io {
	constructor()
	protected enableLog: boolean
	protected proc: any
	protected thread: any
	protected queue: IoEntry[]
	protected fileData: Map__1<string, string>
	reportFilesRemoved(oldFiles: Map__1<string, string>): string[]
	reportFilesAdded(oldFiles: Map__1<string, string>): string[]
	reportFilesChanged(oldFiles: Map__1<string, string>): string[]
	reportFileMetadata(): Map__1<string, string>
	protected log(msg: string): void
	protected done: boolean
	protected pending: boolean
	protected terminated: boolean
	protected flush(): void
	write(path: string, content: string): void
	cleanup(): void
	finished(): boolean
}

export declare class MultiThreadIo implements Io {
	constructor(count: number)
	protected threads: ThreadedIo[]
	protected idx: number
	protected mask: number
	protected fileData: Map__1<string, string>
	reportFilesRemoved(oldFiles: Map__1<string, string>): string[]
	reportFilesAdded(oldFiles: Map__1<string, string>): string[]
	reportFilesChanged(oldFiles: Map__1<string, string>): string[]
	reportFileMetadata(): Map__1<string, string>
	cleanup(): void
	write(path: string, content: string): void
	finished(): boolean
	protected static isPowerOfTwo(x: number): boolean
}
