import {IntMap} from "../haxe/ds/IntMap.js"
import {Register} from "../genes/Register.js"

const $global = Register.$global

export const FeatureFlags = Register.global("$hxClasses")["mcl.FeatureFlags"] = 
class FeatureFlags extends Register.inherits() {
	new() {
		this.useFolderRenames48 = false;
	}
	apply(version, overrides) {
		let _g = [];
		let map = FeatureFlags.flags;
		let _g_map = map;
		let _g_keys = map.keys();
		while (_g_keys.hasNext()) {
			let key = _g_keys.next();
			let _g_value = _g_map.get(key);
			let _g_key = key;
			let k = _g_key;
			let _ = _g_value;
			_g.push(k);
		};
		let ids = _g;
		ids.sort(function (a, b) {
			return a - b;
		});
		let _g1 = 0;
		while (_g1 < ids.length) {
			let id = ids[_g1];
			++_g1;
			if (version < id) {
				return;
			};
			let flag = FeatureFlags.flags.inst.get(id);
			if (flag.useFolderRenames48 != null) {
				this.useFolderRenames48 = flag.useFolderRenames48;
			};
		};
		if (overrides != null) {
			if (overrides.useFolderRenames48 != null) {
				this.useFolderRenames48 = overrides.useFolderRenames48;
			};
		};
		Object.freeze(this);
	}
	static get __name__() {
		return "mcl.FeatureFlags"
	}
	get __class__() {
		return FeatureFlags
	}
}


FeatureFlags.flags = (function($this) {var $r0
	let _g = new IntMap();
	_g.inst.set(48, {"useFolderRenames48": true});
	_g.inst.set(0, {"useFolderRenames43": false, "useFolderRenames48": false});
	
	$r0 = _g
	return $r0})(this)