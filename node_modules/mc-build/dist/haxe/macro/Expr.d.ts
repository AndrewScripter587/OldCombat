
/**
Represents a position in a file.
*/
export type Position = {
	/**
	Reference to the filename.
	*/
	file: string, 
	/**
	Position of the last character.
	*/
	max: number, 
	/**
	Position of the first character.
	*/
	min: number
}

/**
Represents a node in the AST.
@see https://haxe.org/manual/macro-reification-expression.html
*/
export type Expr = {
	/**
	The expression kind.
	*/
	expr: ExprDef, 
	/**
	The position of the expression.
	*/
	pos: Position
}

/**
Represents a AST node identical to `Expr`, but it allows constraining the
type of accepted expressions.
@see https://haxe.org/manual/macro-ExprOf.html
*/
export type ExprOf<T> = Expr

/**
Represents a switch case.
@see https://haxe.org/manual/expression-switch.html
*/
export type Case = {
	/**
	The expression of the case, if available.
	*/
	expr?: null | Expr, 
	/**
	The optional guard expressions of the case, if available.
	*/
	guard?: null | Expr, 
	/**
	The value expressions of the case.
	*/
	values: Expr[]
}

/**
Represents a variable in the AST.
@see https://haxe.org/manual/expression-var.html
*/
export type Var = {
	/**
	The expression of the variable, if available.
	*/
	expr?: null | Expr, 
	/**
	Whether or not the variable can be assigned to.
	*/
	isFinal?: null | boolean, 
	/**
	Whether or not the variable is static.
	*/
	isStatic?: null | boolean, 
	/**
	Metadata associatied with the variable, if available.
	*/
	meta?: null | MetadataEntry[], 
	/**
	The name of the variable.
	*/
	name: string, 
	/**
	The position of the variable name.
	*/
	namePos?: any, 
	/**
	The type-hint of the variable, if available.
	*/
	type?: null | ComplexType
}

/**
Represents a catch in the AST.
@see https://haxe.org/manual/expression-try-catch.html
*/
export type Catch = {
	/**
	The expression of the catch.
	*/
	expr: Expr, 
	/**
	The name of the catch variable.
	*/
	name: string, 
	/**
	The type of the catch.
	*/
	type?: null | ComplexType
}

/**
Represents the field of an object declaration.
*/
export type ObjectField = {
	/**
	The field expression.
	*/
	expr: Expr, 
	/**
	The name of the field.
	*/
	field: string, 
	/**
	How the field name is quoted.
	*/
	quotes?: null | QuoteStatus
}

/**
Represents a type path in the AST.
*/
export type TypePath = {
	/**
	The name of the type path.
	*/
	name: string, 
	/**
	Represents the package of the type path.
	*/
	pack: string[], 
	/**
	Optional parameters of the type path.
	*/
	params?: null | TypeParam[], 
	/**
	Sub is set on module sub-type access:
	`pack.Module.Type` has `name = "Module"`, `sub = "Type"`, if available.
	*/
	sub?: null | string
}

/**
Represents a type parameter declaration in the AST.
*/
export type TypeParamDecl = {
	/**
	The optional constraints of the type parameter.
	*/
	constraints?: null | ComplexType[], 
	/**
	The optional default type of the type parameter.
	*/
	defaultType?: null | ComplexType, 
	/**
	The metadata of the type parameter.
	*/
	meta?: null | MetadataEntry[], 
	/**
	The name of the type parameter.
	*/
	name: string, 
	/**
	The optional parameters of the type parameter.
	*/
	params?: null | TypeParamDecl[]
}

/**
Represents a function in the AST.
*/
export type Function = {
	/**
	A list of function arguments.
	*/
	args: FunctionArg[], 
	/**
	The expression of the function body, if available.
	*/
	expr?: null | Expr, 
	/**
	An optional list of function parameter type declarations.
	*/
	params?: null | TypeParamDecl[], 
	/**
	The return type-hint of the function, if available.
	*/
	ret?: null | ComplexType
}

/**
Represents a function argument in the AST.
*/
export type FunctionArg = {
	/**
	The metadata of the function argument.
	*/
	meta?: null | MetadataEntry[], 
	/**
	The name of the function argument.
	*/
	name: string, 
	/**
	Whether or not the function argument is optional.
	*/
	opt?: null | boolean, 
	/**
	The type-hint of the function argument, if available.
	*/
	type?: null | ComplexType, 
	/**
	The optional value of the function argument, if available.
	*/
	value?: null | Expr
}

/**
Represents a metadata entry in the AST.
*/
export type MetadataEntry = {
	/**
	The name of the metadata entry.
	*/
	name: string, 
	/**
	The optional parameters of the metadata entry.
	*/
	params?: null | Expr[], 
	/**
	The position of the metadata entry.
	*/
	pos: Position
}

/**
Represents metadata in the AST.
*/
export type Metadata = MetadataEntry[]

/**
Represents a field in the AST.
*/
export type Field = {
	/**
	The access modifiers of the field. By default fields have private access.
	@see https://haxe.org/manual/class-field-access-modifier.html
	*/
	access?: null | Access[], 
	/**
	The documentation of the field, if available. If the field has no
	documentation, the value is `null`.
	*/
	doc?: null | string, 
	/**
	The kind of the field.
	*/
	kind: FieldType, 
	/**
	The optional metadata of the field.
	*/
	meta?: null | MetadataEntry[], 
	/**
	The name of the field.
	*/
	name: string, 
	/**
	The position of the field.
	*/
	pos: Position
}

/**
Represents a type definition.
*/
export type TypeDefinition = {
	/**
	The documentation of the type, if available. If the type has no
	documentation, the value is `null`.
	*/
	doc?: null | string, 
	/**
	The fields of the type definition.
	*/
	fields: Field[], 
	/**
	Whether or not the type is extern.
	*/
	isExtern?: null | boolean, 
	/**
	The kind of the type definition.
	*/
	kind: TypeDefKind, 
	/**
	The optional metadata of the type definition.
	*/
	meta?: null | MetadataEntry[], 
	/**
	The name of the type definition.
	*/
	name: string, 
	/**
	The package of the type definition.
	*/
	pack: string[], 
	/**
	The parameter type declarations of the type definition.
	*/
	params?: null | TypeParamDecl[], 
	/**
	The position to the type definition.
	*/
	pos: Position
}

/**
Represents the import expression.
*/
export type ImportExpr = {
	/**
	The mode of the import expression.
	*/
	mode: ImportMode, 
	/**
	The path to the import expression.
	*/
	path: {
		name: string, 
		pos: Position
	}[]
}
